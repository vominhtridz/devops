{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,deleteProduct,clearErrors}from'../../actions/productActions';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';var ProductsList=function ProductsList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.products;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.product;}),deleteError=_useSelector2.error,isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success('Product deleted successfully');history.push('/admin/products');dispatch({type:DELETE_PRODUCT_RESET});}},[dispatch,alert,error,deleteError,isDeleted,history]);var setProducts=function setProducts(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Tên sản phẩm',field:'name',sort:'asc'},{label:'Giá',field:'price',sort:'asc'},{label:'Số lượng còn lại',field:'stock',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};products.forEach(function(product){data.rows.push({id:product._id,name:product.name,price:\"\".concat(product.price.toLocaleString(),\" VN\\u0110\"),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"Th\\xF4ng b\\xE1o!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-body\",children:\"B\\u1EA1n c\\xF3 mu\\u1ED1n x\\xF3a kh\\xF4ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return deleteProductHandler(product._id);},\"data-dismiss\":\"modal\",children:\"X\\xF3a\"})]})]})})})})]})});});return data;};var deleteProductHandler=function deleteProductHandler(id){dispatch(deleteProduct(id));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Tất cả sản phẩm'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",children:\"Th\\xEAm s\\u1EA3n ph\\u1EA9m m\\u1EDBi\"})}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default ProductsList;","map":{"version":3,"sources":["D:/devops/frontend/src/components/admin/ProductsList.js"],"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","getAdminProducts","deleteProduct","clearErrors","DELETE_PRODUCT_RESET","ProductsList","history","alert","dispatch","state","products","loading","error","product","deleteError","isDeleted","success","push","type","setProducts","data","columns","label","field","sort","rows","forEach","id","_id","name","price","toLocaleString","stock","actions","deleteProductHandler"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { MDBDataTable } from 'mdbreact'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Loader from '../layout/Loader'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAdminProducts, deleteProduct, clearErrors } from '../../actions/productActions'\r\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants'\r\n\r\nconst ProductsList = ({ history }) => {\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { loading, error, products } = useSelector(state => state.products);\r\n    const { error: deleteError, isDeleted } = useSelector(state => state.product)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAdminProducts());\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (deleteError) {\r\n            alert.error(deleteError);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success('Product deleted successfully');\r\n            history.push('/admin/products');\r\n            dispatch({ type: DELETE_PRODUCT_RESET })\r\n        }\r\n\r\n    }, [dispatch, alert, error, deleteError, isDeleted, history])\r\n\r\n    const setProducts = () => {\r\n        const data = {\r\n            columns: [\r\n                {\r\n                    label: 'ID',\r\n                    field: 'id',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Tên sản phẩm',\r\n                    field: 'name',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Giá',\r\n                    field: 'price',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Số lượng còn lại',\r\n                    field: 'stock',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Hành động',\r\n                    field: 'actions',\r\n                },\r\n            ],\r\n            rows: []\r\n        }\r\n\r\n        products.forEach(product => {\r\n            data.rows.push({\r\n                id: product._id,\r\n                name: product.name,\r\n                price: `${(product.price).toLocaleString()} VNĐ`,\r\n                stock: product.stock,\r\n                actions: <Fragment>\r\n                    <Link to={`/admin/product/${product._id}`} className=\"btn btn-primary py-1 px-2\">\r\n                        <i className=\"fa fa-pencil\"></i>\r\n                    </Link>\r\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" data-toggle=\"modal\" data-target=\"#exampleModal\" >\r\n                        <i className=\"fa fa-trash\"></i>\r\n                    </button>\r\n                    {/* model delete */}\r\n                    <div>\r\n                        <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                            <div className=\"modal-dialog\" role=\"document\">\r\n                                <div className=\"modal-content\">\r\n                                    <div className=\"modal-header\">\r\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">Thông báo!</h5>\r\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                            <span aria-hidden=\"true\">×</span>\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class=\"modal-body\">\r\n                                        Bạn có muốn xóa không\r\n                                    </div>\r\n                                    <div className=\"modal-footer\">\r\n                                        <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Hủy</button>\r\n                                        <button type=\"button\" className=\"btn btn-danger\" onClick={() => deleteProductHandler(product._id)} data-dismiss=\"modal\">Xóa</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Fragment>\r\n            })\r\n        })\r\n\r\n        return data;\r\n    }\r\n\r\n    const deleteProductHandler = (id) => {\r\n        dispatch(deleteProduct(id))\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'Tất cả sản phẩm'} />\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <Fragment>\r\n                        <h1 className=\"my-5\">Tất cả sản phẩm</h1>\r\n                        <Link to='/admin/product'><button type=\"button\" className=\"btn btn-primary\">Thêm sản phẩm mới</button></Link>\r\n\r\n                        {loading ? <Loader /> : (\r\n                            <MDBDataTable\r\n                                data={setProducts()}\r\n                                className=\"px-3\"\r\n                                bordered\r\n                                striped\r\n                                hover\r\n                            />\r\n                        )}\r\n\r\n                    </Fragment>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default ProductsList\r\n"]},"metadata":{},"sourceType":"module"}