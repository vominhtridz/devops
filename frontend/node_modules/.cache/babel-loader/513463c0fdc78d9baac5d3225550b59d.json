{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{Doughnut,Line,Radar}from\"react-chartjs-2\";import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts}from'../../actions/productActions';import{allOrders}from'../../actions/orderActions';import{allUsers}from'../../actions/userActions';import ChartIncome from'./ChartIncome';var Dashboard=function Dashboard(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.products;}),products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.allUsers;}),users=_useSelector2.users;var _useSelector3=useSelector(function(state){return state.allOrders;}),orders=_useSelector3.orders,totalAmount=_useSelector3.totalAmount,loading=_useSelector3.loading;var outOfStock=0;products.forEach(function(product){if(product.stock===0){outOfStock+=1;}});// status order\nvar da_dat_hang=0;var dang_van_chuyen=0;var da_giao_hang=0;orders&&orders.forEach(function(order){if(order.orderStatus===\"Đã đặt hàng\"){da_dat_hang+=1;}if(order.orderStatus===\"Đang vận chuyển\"){dang_van_chuyen+=1;}if(order.orderStatus===\"Đã giao hàng\"){da_giao_hang+=1;}});useEffect(function(){dispatch(getAdminProducts());dispatch(allOrders());dispatch(allUsers());},[dispatch]);var totalAmountall=0;orders&&orders.forEach(function(product){totalAmountall+=product.totalPrice;});// Chart Line tính tổng doanh thu\nvar lineState={labels:[\"Số tiền ban đầu\",\"Tổng danh thu hiện tại\"],datasets:[{label:\"TỔNG DANH THU\",backgroundColor:[\"blue\"],hoverBackgroundColor:[\"rgb(197, 72, 49)\"],data:[0,totalAmountall]}]};// Doughnut tính số lượng hàng còn và hết hàng\nvar doughnutState={labels:[\"Hết hàng\",\"Còn hàng\"],datasets:[{backgroundColor:[\"#00A6B4\",\"#6800B4\"],hoverBackgroundColor:[\"#FF1493\",\"#FFD700\"],data:[outOfStock,products.length-outOfStock]}]};// Doughnut thống kê trạng thái đơn hàng\nvar doughnutStateOrder={labels:[\"Đã đặt hàng\",\"Đang vận chuyển\",\"Đã giao hàng\"],datasets:[{backgroundColor:[\"#00A6B4\",\"#6800B4\",\"#FF7F50\"],hoverBackgroundColor:[\"#FF1493\",\"#00FA9A\",\"#FFD700\"],data:[da_dat_hang,dang_van_chuyen,da_giao_hang]}]};// radar chart\nvar kho_giavi=0;var dong_lanh=0;var che_bien=0;var thit_trung_haisan=0;var rau_cu_traicay=0;var banh_keo=0;var do_uong=0;products&&products.forEach(function(product){if(product.category===\"Thực phẩm Khô - Gia Vị\"){kho_giavi+=1;}if(product.category===\"Rau-Củ-Trái cây\"){rau_cu_traicay+=1;}if(product.category===\"Đồ uống - Giải khát\"){do_uong+=1;}if(product.category===\"Bánh kẹo - Đồ ăn vặt\"){banh_keo+=1;}if(product.category===\"Thực phẩm chế biến\"){che_bien+=1;}if(product.category===\"Thịt-Trứng-Hải sản\"){thit_trung_haisan+=1;}if(product.category===\"Thực phẩm đông lạnh\"){dong_lanh+=1;}});var data={labels:['Thực phẩm khô - Gia vị','Thực phẩm đông lạnh','Thực phẩm chế biến','Thịt - Trứng - Hải sản','Rau - Củ - Trái cây','Bánh kẹo - Đồ ăn vặt','Đồ uống - Giải khát'],datasets:[{label:'Danh mục sản phẩm',data:[kho_giavi,dong_lanh,che_bien,thit_trung_haisan,rau_cu_traicay,banh_keo,do_uong],fill:true,backgroundColor:'rgba(54, 162, 235, 0.2)',borderColor:'rgb(54, 162, 235)',pointBackgroundColor:'rgb(54, 162, 235)',pointBorderColor:'#fff',pointHoverBackgroundColor:'#fff',pointHoverBorderColor:'rgb(54, 162, 235)'}]};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"grid-bg ba-grid anim\",children:/*#__PURE__*/_jsx(\"div\",{class:\"inner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"T\\u1ED5ng quan\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Admin Dashboard'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row pr-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-white bg-primary o-hidden h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center card-font-size\",children:[\"T\\u1ED5ng danh thu\",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsxs(\"b\",{children:[totalAmount&&totalAmount.toLocaleString(),\" VN\\u0110\"]})]})}),/*#__PURE__*/_jsxs(Link,{className:\"card-footer text-white clearfix small z-1\",to:\"/admin/orders\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"float-left\",children:\"Xem chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"span\",{className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-angle-right\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-white bg-success o-hidden h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center card-font-size\",children:[\"T\\u1ED5ng s\\u1EA3n ph\\u1EA9m\",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"b\",{children:products&&products.length})]})}),/*#__PURE__*/_jsxs(Link,{className:\"card-footer text-white clearfix small z-1\",to:\"/admin/products\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"float-left\",children:\"Xem chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"span\",{className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-angle-right\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-white bg-danger o-hidden h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center card-font-size\",children:[\"T\\u1ED5ng h\\xF3a \\u0111\\u01A1n\",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"b\",{children:orders&&orders.length})]})}),/*#__PURE__*/_jsxs(Link,{className:\"card-footer text-white clearfix small z-1\",to:\"/admin/orders\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"float-left\",children:\"Xem chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"span\",{className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-angle-right\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-white bg-info o-hidden h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center card-font-size\",children:[\"T\\u1ED5ng ng\\u01B0\\u1EDDi d\\xF9ng\",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"b\",{children:users&&users.length})]})}),/*#__PURE__*/_jsxs(Link,{className:\"card-footer text-white clearfix small z-1\",to:\"/admin/users\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"float-left\",children:\"Xem chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"span\",{className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-angle-right\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-light o-hidden h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-dark\",children:\"T\\xECnh tr\\u1EA1ng s\\u1ED1 l\\u01B0\\u1EE3ng h\\xE0ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"doughnutChart\",children:/*#__PURE__*/_jsx(Doughnut,{data:doughnutState})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-sm-6 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-light o-hidden h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-dark\",children:\"T\\xECnh tr\\u1EA1ng \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"doughnutChart\",children:/*#__PURE__*/_jsx(Doughnut,{data:doughnutStateOrder})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-sm-12 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-light o-hidden h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-dark\",children:\"T\\u1ED5ng doanh thu\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lineChart\",children:/*#__PURE__*/_jsx(Line,{data:lineState})})]})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(ChartIncome,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"radar col-md-5 card text-white bg-light\",children:/*#__PURE__*/_jsx(Radar,{data:data})})]})]})]})})})});};export default Dashboard;","map":{"version":3,"sources":["D:/devops/frontend/src/components/admin/Dashboard.js"],"names":["React","Fragment","useEffect","Link","Doughnut","Line","Radar","MetaData","Loader","Sidebar","useDispatch","useSelector","getAdminProducts","allOrders","allUsers","ChartIncome","Dashboard","dispatch","state","products","users","orders","totalAmount","loading","outOfStock","forEach","product","stock","da_dat_hang","dang_van_chuyen","da_giao_hang","order","orderStatus","totalAmountall","totalPrice","lineState","labels","datasets","label","backgroundColor","hoverBackgroundColor","data","doughnutState","length","doughnutStateOrder","kho_giavi","dong_lanh","che_bien","thit_trung_haisan","rau_cu_traicay","banh_keo","do_uong","category","fill","borderColor","pointBackgroundColor","pointBorderColor","pointHoverBackgroundColor","pointHoverBorderColor","toLocaleString"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { Doughnut, Line, Radar } from \"react-chartjs-2\";\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Loader from '../layout/Loader'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { getAdminProducts } from '../../actions/productActions'\r\nimport { allOrders } from '../../actions/orderActions'\r\nimport { allUsers } from '../../actions/userActions'\r\nimport ChartIncome from './ChartIncome';\r\n\r\nconst Dashboard = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { products } = useSelector(state => state.products)\r\n    const { users } = useSelector(state => state.allUsers)\r\n    const { orders, totalAmount, loading } = useSelector(state => state.allOrders)\r\n\r\n    let outOfStock = 0;\r\n    products.forEach(product => {\r\n        if (product.stock === 0) {\r\n            outOfStock += 1;\r\n        }\r\n    })\r\n    // status order\r\n    let da_dat_hang = 0;\r\n    let dang_van_chuyen = 0;\r\n    let da_giao_hang = 0;\r\n    orders &&\r\n        orders.forEach((order) => {\r\n            if (order.orderStatus === \"Đã đặt hàng\") {\r\n                da_dat_hang += 1;\r\n            }\r\n            if (order.orderStatus === \"Đang vận chuyển\") {\r\n                dang_van_chuyen += 1;\r\n            }\r\n            if (order.orderStatus === \"Đã giao hàng\") {\r\n                da_giao_hang += 1;\r\n            }\r\n        });\r\n\r\n    useEffect(() => {\r\n        dispatch(getAdminProducts())\r\n        dispatch(allOrders())\r\n        dispatch(allUsers())\r\n    }, [dispatch]);\r\n\r\n    let totalAmountall = 0;\r\n    orders &&\r\n        orders.forEach((product) => {\r\n            totalAmountall += product.totalPrice;\r\n        });\r\n    // Chart Line tính tổng doanh thu\r\n    const lineState = {\r\n        labels: [\"Số tiền ban đầu\", \"Tổng danh thu hiện tại\"],\r\n        datasets: [\r\n            {\r\n                label: \"TỔNG DANH THU\",\r\n                backgroundColor: [\"blue\"],\r\n                hoverBackgroundColor: [\"rgb(197, 72, 49)\"],\r\n                data: [0, totalAmountall],\r\n            },\r\n        ],\r\n    };\r\n    // Doughnut tính số lượng hàng còn và hết hàng\r\n    const doughnutState = {\r\n        labels: [\"Hết hàng\", \"Còn hàng\"],\r\n        datasets: [\r\n            {\r\n                backgroundColor: [\"#00A6B4\", \"#6800B4\"],\r\n                hoverBackgroundColor: [\"#FF1493\", \"#FFD700\"],\r\n                data: [outOfStock, products.length - outOfStock],\r\n            },\r\n        ],\r\n    };\r\n    // Doughnut thống kê trạng thái đơn hàng\r\n    const doughnutStateOrder = {\r\n        labels: [\"Đã đặt hàng\", \"Đang vận chuyển\", \"Đã giao hàng\"],\r\n        datasets: [\r\n            {\r\n                backgroundColor: [\"#00A6B4\", \"#6800B4\", \"#FF7F50\"],\r\n                hoverBackgroundColor: [\"#FF1493\", \"#00FA9A\", \"#FFD700\"],\r\n                data: [da_dat_hang, dang_van_chuyen, da_giao_hang],\r\n            },\r\n        ],\r\n    };\r\n    // radar chart\r\n    let kho_giavi = 0;\r\n    let dong_lanh = 0;\r\n    let che_bien = 0;\r\n    let thit_trung_haisan = 0;\r\n    let rau_cu_traicay = 0;\r\n    let banh_keo = 0;\r\n    let do_uong = 0;\r\n    products &&\r\n        products.forEach((product) => {\r\n            if (product.category === \"Thực phẩm Khô - Gia Vị\") {\r\n                kho_giavi += 1;\r\n            }\r\n            if (product.category === \"Rau-Củ-Trái cây\") {\r\n                rau_cu_traicay += 1;\r\n            }\r\n            if (product.category === \"Đồ uống - Giải khát\") {\r\n                do_uong += 1;\r\n            }\r\n            if (product.category === \"Bánh kẹo - Đồ ăn vặt\") {\r\n                banh_keo += 1;\r\n            }\r\n            if (product.category === \"Thực phẩm chế biến\") {\r\n                che_bien += 1;\r\n            }\r\n            if (product.category === \"Thịt-Trứng-Hải sản\") {\r\n                thit_trung_haisan += 1;\r\n            }\r\n            if (product.category === \"Thực phẩm đông lạnh\") {\r\n                dong_lanh += 1;\r\n            }\r\n        });\r\n    const data = {\r\n        labels: [\r\n            'Thực phẩm khô - Gia vị',\r\n            'Thực phẩm đông lạnh',\r\n            'Thực phẩm chế biến',\r\n            'Thịt - Trứng - Hải sản',\r\n            'Rau - Củ - Trái cây',\r\n            'Bánh kẹo - Đồ ăn vặt',\r\n            'Đồ uống - Giải khát'\r\n        ],\r\n        datasets: [{\r\n            label: 'Danh mục sản phẩm',\r\n            data: [kho_giavi, dong_lanh, che_bien, thit_trung_haisan, rau_cu_traicay, banh_keo, do_uong],\r\n            fill: true,\r\n            backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n            borderColor: 'rgb(54, 162, 235)',\r\n            pointBackgroundColor: 'rgb(54, 162, 235)',\r\n            pointBorderColor: '#fff',\r\n            pointHoverBackgroundColor: '#fff',\r\n            pointHoverBorderColor: 'rgb(54, 162, 235)'\r\n        }]\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <div class=\"grid-bg ba-grid anim\">\r\n                <div class=\"inner\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 col-md-2\">\r\n                            <Sidebar />\r\n                        </div>\r\n\r\n                        <div className=\"col-12 col-md-10\">\r\n                            <h1 className=\"my-4\">Tổng quan</h1>\r\n\r\n                            {loading ? <Loader /> : (\r\n                                <Fragment>\r\n                                    <MetaData title={'Admin Dashboard'} />\r\n\r\n                                    <div className=\"row pr-4\">\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-primary o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"text-center card-font-size\">Tổng danh thu<br /> <b>{totalAmount && totalAmount.toLocaleString()} VNĐ</b>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <Link className=\"card-footer text-white clearfix small z-1\" to=\"/admin/orders\">\r\n                                                    <span className=\"float-left\">Xem chi tiết</span>\r\n                                                    <span className=\"float-right\">\r\n                                                        <i className=\"fa fa-angle-right\"></i>\r\n                                                    </span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-success o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"text-center card-font-size\">Tổng sản phẩm<br /> <b>{products && products.length}</b></div>\r\n                                                </div>\r\n                                                <Link className=\"card-footer text-white clearfix small z-1\" to=\"/admin/products\">\r\n                                                    <span className=\"float-left\">Xem chi tiết</span>\r\n                                                    <span className=\"float-right\">\r\n                                                        <i className=\"fa fa-angle-right\"></i>\r\n                                                    </span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n\r\n\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-danger o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"text-center card-font-size\">Tổng hóa đơn<br /> <b>{orders && orders.length}</b></div>\r\n                                                </div>\r\n                                                <Link className=\"card-footer text-white clearfix small z-1\" to=\"/admin/orders\">\r\n                                                    <span className=\"float-left\">Xem chi tiết</span>\r\n                                                    <span className=\"float-right\">\r\n                                                        <i className=\"fa fa-angle-right\"></i>\r\n                                                    </span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n\r\n\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-info o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    <div className=\"text-center card-font-size\">Tổng người dùng<br /> <b>{users && users.length}</b></div>\r\n                                                </div>\r\n                                                <Link className=\"card-footer text-white clearfix small z-1\" to=\"/admin/users\">\r\n                                                    <span className=\"float-left\">Xem chi tiết</span>\r\n                                                    <span className=\"float-right\">\r\n                                                        <i className=\"fa fa-angle-right\"></i>\r\n                                                    </span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-light o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    {/* Doughnut Chart */}\r\n                                                    <h6 className='text-dark'>Tình trạng số lượng hàng</h6>\r\n                                                    <div className=\"doughnutChart\">\r\n                                                        <Doughnut data={doughnutState} />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"col-xl-3 col-sm-6 mb-3\">\r\n                                            <div className=\"card text-white bg-light o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    {/* Doughnut Chart */}\r\n                                                    <h6 className='text-dark'>Tình trạng đơn hàng</h6>\r\n                                                    {/* Doughnut Chart */}\r\n                                                    <div className=\"doughnutChart\">\r\n                                                        <Doughnut data={doughnutStateOrder} />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"col-xl-6 col-sm-12 mb-3\">\r\n                                            <div className=\"card text-white bg-light o-hidden h-100\">\r\n                                                <div className=\"card-body\">\r\n                                                    <h6 className='text-dark'>Tổng doanh thu</h6>\r\n                                                    {/* Line chart */}\r\n                                                    <div className=\"lineChart\">\r\n                                                        <Line\r\n                                                            data={lineState}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </Fragment>\r\n                            )}\r\n\r\n                            <div className='row'>\r\n\r\n                                <div className='col-md-6'>\r\n                                    <ChartIncome />\r\n                                </div>\r\n                                <div className='radar col-md-5 card text-white bg-light'>\r\n\r\n                                    <Radar\r\n                                        data={data}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </Fragment >\r\n    )\r\n}\r\n\r\nexport default Dashboard\r\n"]},"metadata":{},"sourceType":"module"}