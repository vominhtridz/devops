{"ast":null,"code":"import _slicedToArray from\"D:/devops/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Fragment,useState,useEffect}from'react';import MetaData from'../layout/MetaData';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{updateUser,getUserDetails,clearErrors}from'../../actions/userActions';import{UPDATE_USER_RESET}from'../../constants/userConstants';var LookAccount=function LookAccount(_ref){var history=_ref.history,match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole1=_useState6[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.user;}),error=_useSelector.error,isUpdated=_useSelector.isUpdated;var _useSelector2=useSelector(function(state){return state.userDetails;}),user=_useSelector2.user;var userId=match.params.id;useEffect(function(){console.log(user&&user._id!==userId);if(user&&user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setRole1(user.role);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success('Khóa tài khoản thành công!');history.push('/admin/users');dispatch({type:UPDATE_USER_RESET});}},[dispatch,alert,error,history,isUpdated,userId,user]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set('name',name);formData.set('email',email);formData.set('role',role);dispatch(updateUser(user._id,formData));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"KH\\xD3A T\\xC0I KHO\\u1EA2N\"}),/*#__PURE__*/_jsx(\"img\",{className:\"img_look container\",src:\"https://us.123rf.com/450wm/yupiramos/yupiramos1709/yupiramos170901899/85031041-viejo-dise%C3%B1o-aislado-clave-del-ejemplo-del-vector-del-icono.jpg?ver=6\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role_field\",children:\"Quy\\u1EC1n\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"role_field\",className:\"form-control\",name:\"role\",value:\"look\",onChange:function onChange(e){return setRole1(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"look\",children:\"Kh\\xF3a t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"look\",children:\"Kh\\xF3a t\\xE0i kho\\u1EA3n\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Kh\\xF3a t\\xE0i kho\\u1EA3n\"})]})})})})]})]});};export default LookAccount;","map":{"version":3,"sources":["D:/devops/frontend/src/components/admin/LookAccount.js"],"names":["React","Fragment","useState","useEffect","MetaData","Sidebar","useAlert","useDispatch","useSelector","updateUser","getUserDetails","clearErrors","UPDATE_USER_RESET","LookAccount","history","match","name","setName","email","setEmail","role","setRole1","alert","dispatch","state","user","error","isUpdated","userDetails","userId","params","id","console","log","_id","success","push","type","submitHandler","e","preventDefault","formData","FormData","set","target","value"],"mappings":"iOAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CAEA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,CAAqBC,cAArB,CAAqCC,WAArC,KAAwD,2BAAxD,CACA,OAASC,iBAAT,KAAkC,+BAAlC,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAwB,IAArBC,CAAAA,OAAqB,MAArBA,OAAqB,CAAZC,KAAY,MAAZA,KAAY,eAEhBb,QAAQ,CAAC,EAAD,CAFQ,wCAEjCc,IAFiC,eAE3BC,OAF2B,8BAGdf,QAAQ,CAAC,EAAD,CAHM,yCAGjCgB,KAHiC,eAG1BC,QAH0B,8BAIfjB,QAAQ,CAAC,EAAD,CAJO,yCAIjCkB,IAJiC,eAI3BC,QAJ2B,eAMxC,GAAMC,CAAAA,KAAK,CAAGhB,QAAQ,EAAtB,CACA,GAAMiB,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CAPwC,iBASXC,WAAW,CAAC,SAAAgB,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAV,EAAN,CATA,CAShCC,KATgC,cAShCA,KATgC,CASzBC,SATyB,cASzBA,SATyB,mBAUvBnB,WAAW,CAAC,SAAAgB,KAAK,QAAIA,CAAAA,KAAK,CAACI,WAAV,EAAN,CAVY,CAUhCH,IAVgC,eAUhCA,IAVgC,CAYxC,GAAMI,CAAAA,MAAM,CAAGd,KAAK,CAACe,MAAN,CAAaC,EAA5B,CAEA5B,SAAS,CAAC,UAAM,CAEZ6B,OAAO,CAACC,GAAR,CAAYR,IAAI,EAAIA,IAAI,CAACS,GAAL,GAAaL,MAAjC,EACA,GAAIJ,IAAI,EAAIA,IAAI,CAACS,GAAL,GAAaL,MAAzB,CAAiC,CAC7BN,QAAQ,CAACb,cAAc,CAACmB,MAAD,CAAf,CAAR,CACH,CAFD,IAEO,CACHZ,OAAO,CAACQ,IAAI,CAACT,IAAN,CAAP,CACAG,QAAQ,CAACM,IAAI,CAACP,KAAN,CAAR,CACAG,QAAQ,CAACI,IAAI,CAACL,IAAN,CAAR,CACH,CAED,GAAIM,KAAJ,CAAW,CACPJ,KAAK,CAACI,KAAN,CAAYA,KAAZ,EACAH,QAAQ,CAACZ,WAAW,EAAZ,CAAR,CACH,CAED,GAAIgB,SAAJ,CAAe,CACXL,KAAK,CAACa,OAAN,CAAc,4BAAd,EAEArB,OAAO,CAACsB,IAAR,CAAa,cAAb,EAEAb,QAAQ,CAAC,CACLc,IAAI,CAAEzB,iBADD,CAAD,CAAR,CAGH,CAEJ,CA1BQ,CA0BN,CAACW,QAAD,CAAWD,KAAX,CAAkBI,KAAlB,CAAyBZ,OAAzB,CAAkCa,SAAlC,CAA6CE,MAA7C,CAAqDJ,IAArD,CA1BM,CAAT,CA4BA,GAAMa,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GAEA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,GAAT,CAAa,MAAb,CAAqB3B,IAArB,EACAyB,QAAQ,CAACE,GAAT,CAAa,OAAb,CAAsBzB,KAAtB,EACAuB,QAAQ,CAACE,GAAT,CAAa,MAAb,CAAqBvB,IAArB,EAEAG,QAAQ,CAACd,UAAU,CAACgB,IAAI,CAACS,GAAN,CAAWO,QAAX,CAAX,CAAR,CACH,CATD,CAYA,mBACI,MAAC,QAAD,yBACI,KAAC,QAAD,EAAU,KAAK,cAAf,EADJ,cAEI,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,KAAC,OAAD,IADJ,EADJ,cAKI,YAAK,SAAS,CAAC,kBAAf,uBACI,YAAK,SAAS,CAAC,aAAf,uBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,cAAM,SAAS,CAAC,WAAhB,CAA4B,QAAQ,CAAEH,aAAtC,wBACI,WAAI,SAAS,CAAC,WAAd,uCADJ,cAEI,YAAK,SAAS,CAAC,oBAAf,CAAoC,GAAG,CAAC,2JAAxC,CAAoM,GAAG,CAAC,EAAxM,EAFJ,cAGI,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,OAAO,CAAC,aAAf,mBADJ,cAEI,cACI,IAAI,CAAC,OADT,CAEI,EAAE,CAAC,aAFP,CAGI,SAAS,CAAC,cAHd,CAII,IAAI,CAAC,OAJT,CAKI,KAAK,CAAEpB,KALX,CAMI,QAAQ,CAAE,kBAACqB,CAAD,QAAOpB,CAAAA,QAAQ,CAACoB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAf,EANd,CAOI,QAAQ,KAPZ,EAFJ,GAHJ,cAgBI,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,OAAO,CAAC,YAAf,wBADJ,cAGI,gBACI,EAAE,CAAC,YADP,CAEI,SAAS,CAAC,cAFd,CAGI,IAAI,CAAC,MAHT,CAII,KAAK,CAAC,MAJV,CAKI,QAAQ,CAAE,kBAACN,CAAD,QAAOlB,CAAAA,QAAQ,CAACkB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAf,EALd,wBAOI,eAAQ,KAAK,CAAC,MAAd,uCAPJ,cAQI,eAAQ,KAAK,CAAC,MAAd,uCARJ,GAHJ,GAhBJ,cA+BI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,oCAAhC,uCA/BJ,GADJ,EADJ,EADJ,EALJ,GAFJ,GADJ,CAmDH,CAzGD,CA2GA,cAAehC,CAAAA,WAAf","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { updateUser, getUserDetails, clearErrors } from '../../actions/userActions'\r\nimport { UPDATE_USER_RESET } from '../../constants/userConstants'\r\n\r\nconst LookAccount = ({ history, match }) => {\r\n\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [role, setRole1] = useState('')\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { error, isUpdated } = useSelector(state => state.user);\r\n    const { user } = useSelector(state => state.userDetails)\r\n\r\n    const userId = match.params.id;\r\n\r\n    useEffect(() => {\r\n\r\n        console.log(user && user._id !== userId);\r\n        if (user && user._id !== userId) {\r\n            dispatch(getUserDetails(userId))\r\n        } else {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setRole1(user.role)\r\n        }\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isUpdated) {\r\n            alert.success('Khóa tài khoản thành công!')\r\n\r\n            history.push('/admin/users')\r\n\r\n            dispatch({\r\n                type: UPDATE_USER_RESET\r\n            })\r\n        }\r\n\r\n    }, [dispatch, alert, error, history, isUpdated, userId, user])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.set('name', name);\r\n        formData.set('email', email);\r\n        formData.set('role', role);\r\n\r\n        dispatch(updateUser(user._id, formData))\r\n    }\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={`Update User`} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <div className=\"row wrapper\">\r\n                        <div className=\"col-10 col-lg-5\">\r\n                            <form className=\"shadow-lg\" onSubmit={submitHandler}>\r\n                                <h1 className=\"mt-2 mb-5\">KHÓA TÀI KHOẢN</h1>\r\n                                <img className='img_look container' src='https://us.123rf.com/450wm/yupiramos/yupiramos1709/yupiramos170901899/85031041-viejo-dise%C3%B1o-aislado-clave-del-ejemplo-del-vector-del-icono.jpg?ver=6' alt='' />\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"email_field\">Email</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        id=\"email_field\"\r\n                                        className=\"form-control\"\r\n                                        name='email'\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        disabled\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"role_field\">Quyền</label>\r\n\r\n                                    <select\r\n                                        id=\"role_field\"\r\n                                        className=\"form-control\"\r\n                                        name='role'\r\n                                        value=\"look\"\r\n                                        onChange={(e) => setRole1(e.target.value)}\r\n                                    >\r\n                                        <option value=\"look\">Khóa tài khoản</option>\r\n                                        <option value=\"look\">Khóa tài khoản</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" >Khóa tài khoản</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default LookAccount\r\n"]},"metadata":{},"sourceType":"module"}