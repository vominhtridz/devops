{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{allUsers,clearErrors}from'../../actions/userActions';import{DELETE_USER_RESET}from'../../constants/userConstants';var UsersList=function UsersList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allUsers;}),loading=_useSelector.loading,error=_useSelector.error,users=_useSelector.users;var _useSelector2=useSelector(function(state){return state.user;}),isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(allUsers());if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('User deleted successfully');history.push('/admin/users');dispatch({type:DELETE_USER_RESET});}},[dispatch,alert,error,isDeleted,history]);var setUsers=function setUsers(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Tên người dùng',field:'name',sort:'asc'},{label:'Email',field:'email',sort:'asc'},{label:'Quyền',field:'role',sort:'asc'},{label:'Trạng thái tài khoản    ',field:'status',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};users.forEach(function(userr){var hoat_dong='';if(userr.role===\"look\"){userr.role=\"Đã bị khóa\";}if(userr.role===\"user\"){userr.role=\"Người dùng\";}if(userr.role===\"admin\"){userr.role=\"Quản trị\";}if(userr.role===\"Người dùng\"||\"Quản trị\"){hoat_dong=\"Hoạt động\";}data.rows.push({id:userr._id,name:userr.name,email:userr.email,role:userr.role,status:userr.role&&String(userr.role).includes('Đã bị khóa')?/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-key-fill\"}),\" \",userr.role]}):/*#__PURE__*/_jsxs(\"p\",{style:{color:'green'},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-activity\"}),\" \",hoat_dong]}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[\"\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/user/\".concat(userr._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),\"\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/look_user/\".concat(userr._id),className:\"btn btn-danger py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-key-fill\"})})]})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Users'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 ng\\u01B0\\u1EDDi d\\xF9ng\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setUsers(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default UsersList;","map":{"version":3,"sources":["D:/devops/frontend/src/components/admin/UsersList.js"],"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","allUsers","clearErrors","DELETE_USER_RESET","UsersList","history","alert","dispatch","state","loading","error","users","user","isDeleted","success","push","type","setUsers","data","columns","label","field","sort","rows","forEach","userr","hoat_dong","role","id","_id","name","email","status","String","includes","color","actions"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { MDBDataTable } from 'mdbreact'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Loader from '../layout/Loader'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { allUsers, clearErrors } from '../../actions/userActions'\r\nimport { DELETE_USER_RESET } from '../../constants/userConstants'\r\n\r\nconst UsersList = ({ history }) => {\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { loading, error, users } = useSelector(state => state.allUsers);\r\n    const { isDeleted } = useSelector(state => state.user)\r\n\r\n    useEffect(() => {\r\n        dispatch(allUsers());\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success('User deleted successfully');\r\n            history.push('/admin/users');\r\n            dispatch({ type: DELETE_USER_RESET })\r\n        }\r\n\r\n    }, [dispatch, alert, error, isDeleted, history])\r\n\r\n\r\n    const setUsers = () => {\r\n        const data = {\r\n            columns: [\r\n                {\r\n                    label: 'ID',\r\n                    field: 'id',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Tên người dùng',\r\n                    field: 'name',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Email',\r\n                    field: 'email',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Quyền',\r\n                    field: 'role',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Trạng thái tài khoản    ',\r\n                    field: 'status',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Hành động',\r\n                    field: 'actions',\r\n                },\r\n            ],\r\n            rows: []\r\n        }\r\n\r\n        users.forEach(userr => {\r\n            let hoat_dong = '';\r\n            if (userr.role === \"look\") {\r\n                userr.role = \"Đã bị khóa\"\r\n            }\r\n            if (userr.role === \"user\") {\r\n                userr.role = \"Người dùng\"\r\n            }\r\n            if (userr.role === \"admin\") {\r\n                userr.role = \"Quản trị\"\r\n            }\r\n            if (userr.role === \"Người dùng\" || \"Quản trị\") {\r\n                hoat_dong = \"Hoạt động\"\r\n            }\r\n\r\n            data.rows.push({\r\n                id: userr._id,\r\n                name: userr.name,\r\n                email: userr.email,\r\n                role: userr.role,\r\n                status: userr.role && String(userr.role).includes('Đã bị khóa')\r\n                    ? <p style={{ color: 'red' }}><i class=\"bi bi-key-fill\"></i> {userr.role}</p>\r\n                    : <p style={{ color: 'green' }}><i class=\"bi bi-activity\"></i> {hoat_dong}</p>,\r\n                actions: <Fragment>\r\n                    &emsp;\r\n                    <Link to={`/admin/user/${userr._id}`} className=\"btn btn-primary py-1 px-2\">\r\n                        <i className=\"fa fa-pencil\"></i>\r\n                    </Link>&emsp;\r\n                    <Link to={`/admin/look_user/${userr._id}`} className=\"btn btn-danger py-1 px-2\">\r\n                        <i class=\"bi bi-key-fill\"></i>\r\n                    </Link>\r\n\r\n                </Fragment>\r\n            })\r\n        })\r\n\r\n        return data;\r\n    }\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'All Users'} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <Fragment>\r\n                        <h1 className=\"my-5\">Tất cả người dùng</h1>\r\n\r\n                        {loading ? <Loader /> : (\r\n                            <MDBDataTable\r\n                                data={setUsers()}\r\n                                className=\"px-3\"\r\n                                bordered\r\n                                striped\r\n                                hover\r\n                            />\r\n                        )}\r\n\r\n                    </Fragment>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default UsersList\r\n"]},"metadata":{},"sourceType":"module"}