{"ast":null,"code":"import _slicedToArray from\"D:/devops/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Fragment,useState,useEffect}from'react';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getProductReviews,deleteReview,clearErrors}from'../../actions/productActions';import{DELETE_REVIEW_RESET}from'../../constants/productConstants';var ProductReviews=function ProductReviews(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productReviews;}),error=_useSelector.error,reviews=_useSelector.reviews;var _useSelector2=useSelector(function(state){return state.review;}),isDeleted=_useSelector2.isDeleted,deleteError=_useSelector2.error;useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(productId!==''){dispatch(getProductReviews(productId));}if(isDeleted){alert.success('Đã xóa đánh giá thành công');dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,productId,isDeleted,deleteError]);var deleteReviewHandler=function deleteReviewHandler(id){dispatch(deleteReview(id,productId));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(getProductReviews(productId));};var setReviews=function setReviews(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Xếp hạng',field:'rating',sort:'asc'},{label:'Nội dung đánh giá',field:'comment',sort:'asc'},{label:'Người dùng',field:'user',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};reviews.forEach(function(review){data.rows.push({id:review._id,rating:review.rating,comment:review.comment,user:review.name,actions:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",onClick:function onClick(){return deleteReviewHandler(review._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Product Reviews'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"productId_field\",children:\"Nh\\u1EADp ID s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"productId_field\",className:\"form-control\",value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{id:\"search_button\",type:\"submit\",className:\"btn btn-primary btn-block py-2\",children:\"T\\xCCM KI\\u1EBEM\"})]})})}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(MDBDataTable,{data:setReviews(),className:\"px-3\",bordered:true,striped:true,hover:true}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 text-center\",children:\"Kh\\xF4ng c\\xF3 b\\xECnh lu\\u1EADn cho s\\u1EA3n ph\\u1EA9m n\\xE0y.\"})]})})]})]});};export default ProductReviews;","map":{"version":3,"sources":["D:/devops/frontend/src/components/admin/ProductReviews.js"],"names":["React","Fragment","useState","useEffect","MDBDataTable","MetaData","Sidebar","useAlert","useDispatch","useSelector","getProductReviews","deleteReview","clearErrors","DELETE_REVIEW_RESET","ProductReviews","productId","setProductId","alert","dispatch","state","productReviews","error","reviews","review","isDeleted","deleteError","success","type","deleteReviewHandler","id","submitHandler","e","preventDefault","setReviews","data","columns","label","field","sort","rows","forEach","push","_id","rating","comment","user","name","actions","target","value","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\nimport { MDBDataTable } from 'mdbreact'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getProductReviews, deleteReview, clearErrors } from '../../actions/productActions'\r\nimport { DELETE_REVIEW_RESET } from '../../constants/productConstants'\r\n\r\nconst ProductReviews = () => {\r\n\r\n    const [productId, setProductId] = useState('')\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { error, reviews } = useSelector(state => state.productReviews);\r\n    const { isDeleted, error: deleteError } = useSelector(state => state.review)\r\n\r\n    useEffect(() => {\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (deleteError) {\r\n            alert.error(deleteError);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (productId !== '') {\r\n            dispatch(getProductReviews(productId))\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success('Đã xóa đánh giá thành công');\r\n            dispatch({ type: DELETE_REVIEW_RESET })\r\n        }\r\n\r\n\r\n\r\n    }, [dispatch, alert, error, productId, isDeleted, deleteError])\r\n\r\n    const deleteReviewHandler = (id) => {\r\n        dispatch(deleteReview(id, productId))\r\n    }\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(getProductReviews(productId))\r\n    }\r\n\r\n    const setReviews = () => {\r\n        const data = {\r\n            columns: [\r\n                {\r\n                    label: 'ID',\r\n                    field: 'id',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Xếp hạng',\r\n                    field: 'rating',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Nội dung đánh giá',\r\n                    field: 'comment',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Người dùng',\r\n                    field: 'user',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Hành động',\r\n                    field: 'actions',\r\n                },\r\n            ],\r\n            rows: []\r\n        }\r\n\r\n        reviews.forEach(review => {\r\n            data.rows.push({\r\n                id: review._id,\r\n                rating: review.rating,\r\n                comment: review.comment,\r\n                user: review.name,\r\n\r\n                actions:\r\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" onClick={() => deleteReviewHandler(review._id)}>\r\n                        <i className=\"fa fa-trash\"></i>\r\n                    </button>\r\n            })\r\n        })\r\n\r\n        return data;\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'Product Reviews'} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <Fragment>\r\n                        <div className=\"row justify-content-center mt-5\">\r\n                            <div className=\"col-5\">\r\n                                <form onSubmit={submitHandler}>\r\n                                    <div className=\"form-group\">\r\n                                        <label htmlFor=\"productId_field\">Nhập ID sản phẩm</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"productId_field\"\r\n                                            className=\"form-control\"\r\n                                            value={productId}\r\n                                            onChange={(e) => setProductId(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <button\r\n                                        id=\"search_button\"\r\n                                        type=\"submit\"\r\n                                        className=\"btn btn-primary btn-block py-2\"\r\n                                    >\r\n                                        TÌM KIẾM\r\n                                    </button>\r\n                                </ form>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        {reviews && reviews.length > 0 ? (\r\n                            <MDBDataTable\r\n                                data={setReviews()}\r\n                                className=\"px-3\"\r\n                                bordered\r\n                                striped\r\n                                hover\r\n                            />\r\n                        ) : (\r\n                            <p className=\"mt-5 text-center\">Không có bình luận cho sản phẩm này.</p>\r\n                        )}\r\n\r\n\r\n                    </Fragment>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default ProductReviews\r\n"]},"metadata":{},"sourceType":"module"}